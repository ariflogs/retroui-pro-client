import{u as v,q as w,r as m,e as y,j as e,C as s,b as r,T as N,t as l,f as c}from"./main-iiZPEbsr.js";import{L as d,I as u}from"./label-Cww25YmJ.js";import"./index-BkVgSpOB.js";function b(){const{user:a,token:h,isLoading:x,logout:f,checkAuth:p}=v(),j=w(),[t,i]=m.useState({name:(a==null?void 0:a.name)||"",email:(a==null?void 0:a.email)||""}),o=y({mutationFn:async()=>{await fetch("https://workers.retroui.dev/auth/profile",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({name:t.name,email:(a==null?void 0:a.email)??"",newEmail:(a==null?void 0:a.email)!==t.email?t.email:void 0})}).then(n=>n.json()),await p()}}),g=async n=>{n.preventDefault();try{await o.mutate(),l.success("Profile updated")}catch{l.error("Failed to update profile")}};return m.useEffect(()=>{i({name:(a==null?void 0:a.name)||"",email:(a==null?void 0:a.email)||""})},[a]),x?e.jsx("div",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx(s,{className:"w-full bg-white shadow-none",children:e.jsx("form",{onSubmit:g,children:e.jsxs(s.Content,{className:"space-y-4 p-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Name"}),e.jsx(u,{id:"name",name:"name",value:t.name,onChange:n=>i({...t,name:n.target.value}),placeholder:"Your name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"email",children:"Email"}),e.jsx(u,{id:"email",name:"email",type:"email",value:t.email,onChange:n=>i({...t,email:n.target.value}),placeholder:"Your email"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This email is used for notifications and login."})]}),e.jsx("div",{className:"flex flex-row gap-4",children:e.jsx(r,{type:"submit",disabled:o.isPending,children:o.isPending?"Saving...":"Update Profile"})})]})})}),e.jsx(s,{className:"w-full bg-white mt-12 shadow-none",children:e.jsxs(s.Content,{className:"space-y-4 p-6",children:[e.jsx(N,{className:"text-lg font-medium",children:"Want to switch accounts?"}),e.jsx(r,{variant:"secondary",onClick:()=>{f(),l.success("Logged out"),j.navigate({to:"/"})},children:"Logout"})]})})]})}function F(){return e.jsx("div",{className:"min-h-screen w-full flex justify-center px-4 mt-10",children:e.jsxs("div",{className:"w-full max-w-3xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(c,{as:"h2",children:"Profile Settings"}),e.jsx(c,{className:"text-muted-foreground font-medium mt-1",children:"Manage your retroui account preferences and personal information"})]}),e.jsx(b,{})]})})}export{F as component};
